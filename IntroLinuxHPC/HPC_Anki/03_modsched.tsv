What is a user’s environment? How can this be shown?	A user’s environment is any user-defined variable that affect the way processes will behave, such as $HOME, $DISPLAY, $PATH. A user’s environment is shown with the `env` command.
What are environment modules? What do they do?	Environment modules allow a user to dynamically change the software they have in their $PATH, such as binary executables, liibraries, manual pages, etc.
Why would one use environment modules?	Environment modules allow multiple versions of the same software to exist on a system catering for different user needs for benchmarking, consistency, and hardware.
How is software built on Spartan and other HPC systems? Why is done this way?	Software is typically built from the source-code. This allows for optimisation and integration with other software and the specific hardware of the system. Typically, a performance improvement of 25%-33% can be expected over installing software from pre-packaged binaries.
What does Spartan use to help install software?	Spartan uses the EasyBuild build-automation system, a global collection of tested scripts. Another similar system is Spac. 
Where are the EasyBuild scripts located?	The current EasyBuild scripts on Spartan are found at: `/apps/easybuild-2022/easybuild/local-easybuild/`. This can be used for review, or by traversing the directories to sourecode, or can be used by those who wish to create custom installs and patches.
What is a toolchain?	A toolchain is a collection one or more compilers (e.g., GCC) with libraries for specialist functions (e.g., BLAS, LAPACK). Toolchains are required to build and use software applications.
What type of environment module program does Spartan use? What are the alternatives?	Spartan, like most HPC systems, uses the Lmod (Lua-modules) program. Some systems may use the older Tcl-based modules system. 
Why is the Lmod system preferable to Tmod?	Lmod only allows one version of an application to loaded at any time, preventing the same application (with different versions) being loaded in the $PATH simultaneously. This prevents unexpected errors, such as calling an old library.
How would a user display the current environment modules?	The command `module list` displays current loaded module files.
What environment module files are loaded by default on Spartan?	By default, the Slurm, spartan-rhel9, foss/2022a modules are loaded and their dependencies.
What do Spartan’s default module files allow a user to do?	Submit jobs and conduct operations for the scheduler with Slurm, run multinode applications with foss/2022a
What does the `module avail` command do? What are its limitations?	The `module avail` command lists available system software and software for loaded toolchains. It will not list software for toolchains that are not loaded.
How does one load or unload an environment module? What happens to dependencies?	The command to load a module is `module load $modulename` and `module unload $module` to unload it. Dependencies will be updated if a `module load` command is used, but will remain in the $PATH if a module is unloaded as they could be used for another purpose..
What does the `module switch` command do?	The `module switch` command unloaded one module file and switches it for another. Typically this is with the same software application, but different versions (e.g., `module switch GCC/11.3.0 GCC/13.3.0`). Dependencies will also be updated.
What does the `module spider` command do? How does it compare to the `module overview` command?	The `module spider` command shows all modules, major versions, and a brief description of the module, for all toolchains. The `module overview` command shows the title of the module, organised by toolchain, and the number of versions installed.
What does the `module display` command do? Why is it useful for languages like Python, Perl, and R?	The `module display` command will list the $PATHs for a module file and provide a brief description of the application. Further, for languages like Python, Perl, and R, it will list the extensions to those languages and the version numbers of those extensions.
How does one conduct a regular expression search with Lmod?	"The module system supports regex searches with the -r option, e.g., module -r avail ""^Python"" will find all modules that start with Python."
What does the `module purge` command do? When should it be used?	The `module purge` command will remove all modules from the $PATH except the Slurm and Spartan modules. It should be used to clear the environment, for example in a job submission script.
How are programming language extensions (e.g., for Python, R, Perl) installed in the modules system?	Extensions are typically installed with a language (use module display to determine which extensions and versions). Languages may also have a -bare installation with minimal extensions or as a collection (e.g.,  SciPy-bundle) or as individual applications (e.g., scikit-learn)
How do you load a module compiled with a different toolchain?	A module can only be loaded if the toolchain is present. One cannot, for example, load Gaussian, without loading the NVHPC toolchain first. 
When are modules usually invoked in an HPC system?	Modules are usually called as part of a PBS job, typically in batch mode but also in an interactive session.
What is PBS?	The Portable Batch System (PBS) performs job scheduling and submission through unattended background tasks among available resources. It was originally developed in the early 1990s.
What is the architecture of PBS? What are some implementations?	PBS consists of resource manager and a scheduler. Resource managers include TORQUE, schedulers include Maui or Moab. Combined workload managers include Slurm and PBSPro. 
Where are example job submission scripts on Spartan?	Spartan has a large collection of example job submission scripts at `/apps/examples/`
What are some of the advantages of Slurm over other workload managers?	Slurm offers extensive reporting tools, optional modules, is used on 60% of the top 500 supercomputers, and is fully free and open source.
What is the structure of a Slurm job submission script?	A Slurm script must begin by invoking a shell, then the directives to the scheduler, then the shell commands, starting with the modules that need to be loaded, followed by the commands to the applications.
What is the format for directives to the scheduler? How are these interpreted by the shell?	A directive to the Slurm scheduler takes the form of `#SBATCH $resource_request`. The hash symbol means that it is interpreted by the shell as a comment.
What is the command to display available partitions and their status?	The `sinfo -s` command will give a summary of available partitions, maximum walltime, number of nodes, and allocation. The `sinfo -p $partition` will give status of the nodes whether idle, allocated, or in a mixed state.
How are partitions determined on Spartan?	Spartan partitions are logical groupings based on common characteristics. Common hardware provides a limiting factor, but they can also be grouped according to faculty or project, depending on who has provided the finances for the resources.
What are some of the characteristics that determine job priority?	Job priority is determined by job size, wait time, backfilling, processor limits, and fair share (recent previous use).
What is “fair share”?	With fairshare system the resources used by a user's jobs in the last 14 days are considered. The more resources used by your jobs in the last 14 days, the lower the priority of the user’s new jobs.
How does one see their job priority?	The command `sprio -j $jobid` shows the job priority and the components of the calculation.
Why can’t jobs run on the login node?	The login nodes are used by all users to conduct operations. A resource-intensive or multinode operation will slow down operations for all other users. Use the job submission system instead.
What if resource-intensive interactive operations are required? How should they be run?	An interactive job provides an alternative to running resource-intensive jobs on a login node.
How does one see what jobs are running on a particular partition?	The `squeue -p $partition` or `showq -p $partition` will show jobs running on a particular partition. The format of the latter is more readable and shows jobid, jobname, username, state, cores and gpus used, remaining time, and starttime.
What is the command to launch a job?	The job launch command is `sbatch $jobscript`. This is the same regardless of whether a job is launched from the home directory, project directory, or even another compute node.
How does the user see the status of a job?	The status of a specific job can be shown from the `sbatch -j $jobid` command.
How does a user see the status of all their jobs?	The status of all jobs by a user can be shown by the `sbatch -u $username` command, or, for the user `squeue –me`
How does one see job details of a queued or running job?	The command `scontrol show job $jobid` will show detailed information about a job.
What are the main job state codes?	The main job state codes are PD (pending), R (running), CG (completing), CD (completed), F (failed). 
How can a user cancel a job?	A job can be cancelled with `scancel $jobid`. A user cannot cancel another user’s jobs.
How can a user view the resources a job used?	The Spartan HPC teams have developed an application `my-job-stats`. Code at the end of a Slurm script (see examples in `/apps/examples`) can save this resource records to Slurm output files.
